# ğŸ§ Structured JSON Extractor: Unstructured Text â†’ Structured JSON

> Convert complex unstructured documents into valid structured JSON using LLMs like GPT-4.1 and O4 Mini with schema adherence and validation.

---

## ğŸ”— App Access

**Streamlit App**: [https://jason-extract-gen.streamlit.app/](https://jason-extract-gen.streamlit.app/)

---

## ğŸš€ How to Use the App

1. Visit the app link above.
2. Upload a valid JSON schema.
3. Upload a text file (`.txt` or `.pdf`) that contains unstructured input.
4. Choose your model from the dropdown:
   - ğŸ§  **GPT 4.1** â€” Best for simpler, smaller schemas.
   - ğŸ§© **GPT O4 Mini** â€” Handles long text + large complex schemas (up to 100k tokens).
5. Click **Generate JSON**.
6. Wait while the system:
   - Validates your schema.
   - Estimates token size.
   - Prompts the model up to 3 times until output is schema-valid.
7. View the structured JSON.
8. Download the JSON and logs.

---

## ğŸ”Œ API Setup - Application Steps

### â–¶ï¸ Running the API

```bash
git clone <https://github.com/cosmoavijeet07/JSON-generator.git>
cd JSON-generator
pip install -r requirements.txt
echo "OPENAI_API_KEY=sk-..." > .env

uvicorn fastapi_app:app --reload --port 8000
```

---

## ğŸ“¡ API Endpoint

### POST `/extract-json/`

**Description**: Generate a structured JSON from unstructured input using a schema and selected model.

#### ğŸ”¸ Input: `multipart/form-data`
| Field   | Type        | Required | Description                   |
|---------|-------------|----------|-------------------------------|
| schema  | File (.json)| âœ…        | Valid JSON Schema             |
| text    | File (.txt) | âœ…        | Input text document           |
| model   | String      | âŒ        | Model ID (default GPT 4.1)    |

#### ğŸ”¹ Sample `curl` Request
```bash
curl -X POST http://localhost:8000/extract-json/ \
  -F "schema=@schema.json" \
  -F "text=@input.txt" \
  -F "model=gpt-4.1-2025-04-14"
```

#### âœ… Success Response
```json
{
  "session_id": "b95c...",
  "token_estimate": 8372,
  "attempts": 2,
  "json_result": { [...]
  }
}
```

#### âŒ Failure Response
```json
{
  "error": "Validation failed after 3 attempts: Missing required field",
  "session_id": "b95c...",
  "token_estimate": 10423
}
```

---

## ğŸ§± Architecture Diagram
![alt text](image.png)


---

## ğŸ§° Technologies Used

- **LLM APIs**: OpenAI GPT-4.1 & GPT-O4 Mini
- **Prototype**: Streamlit
- **API Service**: FastAPI
- **Validation**: JSON Schema + `jsonschema`
- **Token Estimation**: tiktoken
- **Prompting**: Custom few-shot + retry
- **Logging**: Per-session logs stored in `logs/`

---

## ğŸ“ Folder Structure

```text
JSON GENERATOR/
â”œâ”€â”€ core/                         # Core logic modules
â”‚   â”œâ”€â”€ json_extractor.py
â”‚   â”œâ”€â”€ llm_interface.py
â”‚   â”œâ”€â”€ logger_service.py
â”‚   â”œâ”€â”€ prompt_engine.py
â”‚   â”œâ”€â”€ schema_validator.py
â”‚   â”œâ”€â”€ session_manager.py
â”‚   â”œâ”€â”€ token_estimator.py
â”‚
â”œâ”€â”€ logs/                         # Session logs
â”‚
â”œâ”€â”€ Sample Inputs with output/    # Examples & output
â”‚
â”œâ”€â”€ .env                          # OpenAI keys
â”œâ”€â”€ .gitignore
â”œâ”€â”€ app.py                        # Streamlit frontend
â”œâ”€â”€ fastapi_app.py                # FastAPI backend
â”œâ”€â”€ requirements.txt
â””â”€â”€ README.md
```

---

## ğŸ“š CORE files

Each module in the `core/` folder is fully commented and structured.

| File | Purpose |
|------|---------|
| `prompt_engine.py` | Schema-aware prompts with multi-shot + retry handling |
| `json_extractor.py` | Extracts clean JSON from LLM output and validates against schema |
| `llm_interface.py` | Manages calls to OpenAI API with retry-safe abstraction |
| `token_estimator.py` | Uses `tiktoken` to estimate total tokens for cost/safety |
| `logger_service.py` | Writes structured per-session logs to disk |

---
ğŸ§¾ View detailed documentation [doc](docdotcom).

## ğŸ‘¤ Author & Support

Developed by `Avijeet Palit`
ğŸ“« Reach out: [avijeet.palit07@gmail.com]
